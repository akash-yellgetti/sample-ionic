"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4831],{4831:(I,b,a)=>{a.r(b),a.d(b,{LetsSelfiPageModule:()=>w});var h=a(6895),L=a(433),o=a(8058),f=a(1407),p=a(4573),v=a(529),_=a(6388),e=a(8274),P=a(5175),C=a(5085);function y(t,r){if(1&t&&e._UZ(0,"img",14),2&t){const s=e.oxw().$implicit;e.s9C("src",s.img_url,e.LSH)}}function O(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"ion-col",8)(1,"div",9),e.NdJ("click",function(){const n=e.CHM(s),l=n.$implicit,c=n.index,g=e.oxw();return e.KtG(g.openSelfiCamera(l.lets_selfi_id,c+1))}),e.YNc(2,y,1,1,"img",10),e.TgZ(3,"ion-fab",11)(4,"ion-fab-button",12),e._UZ(5,"ion-icon",13),e.qZA()()()()}if(2&t){const s=r.$implicit;e.xp6(2),e.Q6J("ngIf",""!=s.img_url)}}const k=[{path:"",component:(()=>{class t{constructor(s,i,n,l,c,g,m){this.navCtrl=s,this.activateRoute=i,this.http=n,this.toastCtrl=l,this.loadingCtrl=c,this.transfer=g,this.socket=m,this.model=new Array,this.imgArr=[{lets_selfi_id:0,img_ord:"1",img_name:"",img_url:""},{lets_selfi_id:0,img_ord:"2",img_name:"",img_url:""},{lets_selfi_id:0,img_ord:"3",img_name:"",img_url:""}],this.disableFormFlag=!1,this.letsID=this.activateRoute.snapshot.paramMap.get("letsID"),this.acceptedUserID=this.activateRoute.snapshot.paramMap.get("accpUserID")}openSelfiCamera(s,i){s=parseInt(s),i=parseInt(i),_.V1.getPhoto({resultType:_.dk.Uri,source:_.oK.Camera,quality:90,allowEditing:!0,saveToGallery:!0,correctOrientation:!0}).then(l=>{let c=this.loadingCtrl.create({message:"Please wait..."});c.then(d=>{d.present()});const g=this.transfer.create();var m=l.webPath,T=m,S=m.toString().substr(m.toString().lastIndexOf("/")+1),j={fileKey:"file",fileName:S,chunkedMode:!1,params:{client_key:p.L.client_key,user_id:localStorage.getItem("il_user_id"),lets_id:this.letsID,lets_selfi_id:s,fileName:S,img_ord:i}};g.upload(T,p.L.baseURL+"/services/uploadLetsReqSelfi",j).then(d=>{c.then(u=>{u.dismiss()}),this.imgObj=JSON.parse(d.response),this.imgObj=JSON.parse(d.response),200==this.imgObj.code?(this.imgArr[i-1]={lets_selfi_id:this.imgObj.lets_selfi_id,img_name:this.imgObj.image,img_ord:this.imgObj.img_ord,img_url:this.imgObj.img_url},this.disableFormFlag=!0):this.toastCtrl.create({message:this.imgObj.message,duration:3e3,position:"top",cssClass:"custom-success-class"}).then(u=>{u.present()})},d=>{this.toastCtrl.create({message:this.resultObj.message,position:"top",duration:2700}).then(u=>{u.present()})})},l=>{this.toastCtrl.create({message:"Something went wrong. Please try again..",duration:3e3,position:"top",cssClass:"custom-failure-class"}).then(c=>{c.present()})})}acceptLetsPartner(){const s={client_key:p.L.client_key,lets_id:this.letsID,user_id:localStorage.getItem("il_user_id"),accepted_user_id:this.acceptedUserID};this.http.post(p.L.baseURL+"/services/acceptLetsPartner",s,{headers:(new v.WM).set("content-type","application/x-www-form-urlencoded")}).subscribe(i=>{this.resultObj=i,200==this.resultObj.code?(this.toastCtrl.create({message:this.resultObj.message,duration:3e3,position:"top",cssClass:"custom-success-class"}).then(l=>{l.present()}),this.socket.emit("acceptpartner",{lets_id:this.letsID,socket_id:this.resultObj.partner_socket_id}),this.navCtrl.navigateForward("/home")):this.toastCtrl.create({message:this.resultObj.message,duration:3e3,position:"top",cssClass:"custom-failure-class"}).then(l=>{l.present()})},i=>{this.toastCtrl.create({message:"Please check your network connectivity and try logging in again..",duration:3e3,position:"top",cssClass:"custom-failure-class"}).then(n=>{n.present()})})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(o.SH),e.Y36(f.gz),e.Y36(v.eN),e.Y36(o.yF),e.Y36(o.HT),e.Y36(P.K),e.Y36(C.s))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lets-selfi"]],decls:18,vars:2,consts:[[1,"transparent-navbar","white-text"],[1,"dark-bg","white-text","ion-padding"],["col-12",""],[1,"msg-lighter","grey-text"],["col-6","",4,"ngFor","ngForOf"],["size","6"],["expand","full","shape","round",1,"btn-submit","btn-continue",3,"disabled","click"],["type","button","expand","full","shape","round",1,"btn-submit","btn-continue",3,"click"],["col-6",""],[1,"profile-img-holder",3,"click"],["class","profile-img",3,"src",4,"ngIf"],["vertical","bottom","horizontal","end"],["size","small"],["name","camera"],[1,"profile-img",3,"src"]],template:function(s,i){1&s&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e._uU(3,"Lets Have Selfi"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-row")(6,"ion-col",2)(7,"p",3),e._uU(8," Upload selfie to proceed. "),e.qZA()()(),e.TgZ(9,"ion-row"),e.YNc(10,O,6,1,"ion-col",4),e.qZA(),e.TgZ(11,"ion-row")(12,"ion-col",5)(13,"ion-button",6),e.NdJ("click",function(){return i.acceptLetsPartner()}),e._uU(14,"Done"),e.qZA()(),e.TgZ(15,"ion-col",5)(16,"ion-button",7),e.NdJ("click",function(){return i.acceptLetsPartner()}),e._uU(17,"Skip"),e.qZA()()()()),2&s&&(e.xp6(10),e.Q6J("ngForOf",i.imgArr),e.xp6(3),e.Q6J("disabled",0==i.disableFormFlag))},dependencies:[h.sg,h.O5,o.YG,o.wI,o.W2,o.IJ,o.W4,o.Gu,o.gu,o.Nd,o.wd,o.sr],styles:[".profile-img-holder[_ngcontent-%COMP%]{width:100%;height:200px;border:solid 2px #999;text-align:center;background-color:#eee}.profile-img[_ngcontent-%COMP%]{display:inline-block;max-width:100%;max-height:100%}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild(k),f.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.ez,L.u5,o.Pc,x]}),t})()}}]);