"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4987],{4987:(A,_,s)=>{s.r(_),s.d(_,{LoginPageModule:()=>F});var p=s(6895),n=s(433),l=s(8058),f=s(1407),b=s(655),u=s(4573),h=s(529),y=s(5838),e=s(8274),L=s(2553),v=s(579);function P(o,r){if(1&o&&(e.TgZ(0,"ion-select-option",17),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.MGl("value","+",t.country_phone_code,""),e.xp6(1),e.AsE(" +",t.country_phone_code," ",t.country_name," ")}}function C(o,r){1&o&&e.YNc(0,P,2,3,"ion-select-option",16),2&o&&e.Q6J("ngIf",""!=r.$implicit.country_phone_code)}function T(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.model.min_mobile)}}function x(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.AsE("",t.model.min_mobile," - ",t.model.max_mobile,"")}}function M(o,r){if(1&o&&(e.TgZ(0,"div",18),e._uU(1," Enter a valid mobile number("),e.YNc(2,T,2,1,"span",19),e.YNc(3,x,2,2,"span",19),e._uU(4," Digits)! "),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.model.min_mobile==t.model.max_mobile),e.xp6(1),e.Q6J("ngIf",t.model.min_mobile!=t.model.max_mobile)}}function I(o,r){1&o&&(e.TgZ(0,"div",18),e._uU(1,"Mobile number or Password does not match!"),e.qZA())}function O(o,r){1&o&&(e.TgZ(0,"div",18),e._uU(1,"Password is mandatory"),e.qZA())}const w=[{path:"",component:(()=>{class o{constructor(t,i,a,g,d,m,k,J){this.navCtrl=t,this.plt=i,this.geolocation=a,this.toastCtrl=g,this.form=d,this.http=m,this.loadingCtrl=k,this.events=J,this.model=Array(),this.mobRegFlag=!1,this.geoLocationFound=!1,this.isIOSDevice=!1,this.deviceID="",this.currentLat=0,this.currentLang=0,this.deviceType=1,this.submitted=!1,this.getDeviceID=()=>(0,b.mG)(this,void 0,void 0,function*(){const c=yield y.A.getId();this.deviceID=c.uuid}),this.model.country_id="99",this.model.country_phone_code="+91",this.model.min_mobile=10,this.model.max_mobile=10,this.model.mobile="",this.model.password="",this.countries=[{country_id:99,country_name:"India",country_phone_code:91,min_mobile:10,max_mobile:10}],this.FrmLogin=this.form.group({DdlCountry:[this.model.country_phone_code],TxtLogMobile:[this.model.mobile,n.kI.compose([n.kI.required,n.kI.pattern("[0-9]{"+this.model.min_mobile+","+this.model.max_mobile+"}"),n.kI.minLength(this.model.min_mobile),n.kI.maxLength(this.model.max_mobile)])],TxtLoginPassword:[this.model.password,n.kI.compose([n.kI.required])]}),this.isIOSDevice=this.plt.is("ios"),this.isIOSDevice&&(this.deviceType=2),this.geolocation.getCurrentPosition().then(c=>{this.geoLocationFound=!0,this.currentLat=c.coords.latitude,this.currentLang=c.coords.longitude}).catch(c=>{console.log("Error getting location",c)}),this.getDeviceID()}ngAfterViewInit(){this.getCountries()}ionViewDidLoad(){console.log("ionViewDidLoad LoginPage")}goToRegisteration(){this.navCtrl.navigateForward("/registration")}goToForgotPassword(){this.navCtrl.navigateForward("/forgot-password")}getCountries(){this.http.post(u.L.baseURL+"/services/getCountries",{client_key:u.L.client_key},{headers:(new h.WM).set("content-type","application/x-www-form-urlencoded")}).subscribe(t=>{this.resultObj=t,200==this.resultObj.code&&(this.countries=this.resultObj.result)},t=>{})}getCountryVal(){for(var t in this.countries)"+"+this.countries[t].country_phone_code==this.model.country_phone_code&&(this.model.country_id=this.countries[t].country_id,this.model.min_mobile=this.countries[t].min_mobile,this.model.max_mobile=this.countries[t].max_mobile,this.FrmLogin=this.form.group({DdlCountry:[this.model.country_phone_code],TxtLogMobile:[this.model.mobile,n.kI.compose([n.kI.required,n.kI.pattern("[0-9]{"+this.model.min_mobile+","+this.model.max_mobile+"}"),n.kI.minLength(this.model.min_mobile),n.kI.maxLength(this.model.max_mobile)])]}))}onSubmit(t){if(this.FrmLogin.valid){const i=this.loadingCtrl.create({message:"Please wait..."});i.then(d=>{d.present()});let a=this.model.country_phone_code.substring(1,this.model.country_phone_code.length);this.mobRegFlag=!1,this.http.post(u.L.baseURL+"/services/authUser",{client_key:u.L.client_key,mobile:this.model.mobile,password:this.model.password,country_phone_code:a,country_id:this.model.country_id},{headers:(new h.WM).set("content-type","application/x-www-form-urlencoded")}).subscribe(d=>{this.resultObj=d,i.then(m=>{m.dismiss()}),200==this.resultObj.code?(localStorage.setItem("il_user_id",this.resultObj.user_id),localStorage.setItem("il_user_name",this.resultObj.user_name),localStorage.setItem("il_country_phone_code",this.resultObj.country_phone_code),localStorage.setItem("il_country_id",this.resultObj.country_id),localStorage.setItem("il_mobile",this.resultObj.mobile),localStorage.setItem("il_email",this.resultObj.email),localStorage.setItem("il_profile_complete_flag",this.resultObj.profile_complete_flag),localStorage.setItem("il_profile_pic",this.resultObj.profile_pic_path),this.events.publish("loc_device_update",{userID:this.resultObj.user_id}),0==parseInt(this.resultObj.profile_complete_flag)?this.navCtrl.navigateForward("/regprofile"):2==parseInt(this.resultObj.profile_complete_flag)?this.navCtrl.navigateForward("/profile-gallery"):this.navCtrl.navigateForward("/home")):502==this.resultObj.code&&(this.mobRegFlag=!0)},d=>{i.then(m=>{m.dismiss()}),this.toastCtrl.create({message:this.resultObj.message,position:"top",duration:2700}).then(m=>{m.present()})})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.SH),e.Y36(l.t4),e.Y36(L.b),e.Y36(l.yF),e.Y36(n.qu),e.Y36(h.eN),e.Y36(l.HT),e.Y36(v.z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:26,vars:9,consts:[[1,"dark-bg","ion-padding"],[1,"logo-holder"],["src","../../assets/imgs/logo.png","alt","Logo",1,"logo-img"],[1,"full-content","login-form-wrapper"],[1,"h1-header","reg-otp-header"],[1,"ion-text-center",3,"formGroup","ngSubmit"],[1,"form-list","login-form-list"],[1,"form-input-holder","mobile-input-holder"],["interface","action-sheet","name","DdlCountry","id","DdlCountry","formControlName","DdlCountry",1,"mobile-select",3,"ngModel","selectedText","ngModelChange","ionChange"],["ngFor","",3,"ngForOf"],["type","number","formControlName","TxtLogMobile","name","TxtLogMobile","id","TxtLogMobile","value","","required","","autocomplete","off","placeholder","Mobile*",1,"mobile-input",3,"ngModel","ngModelChange","keyup"],["class","err-msg",4,"ngIf"],["type","password","formControlName","TxtLoginPassword","name","TxtLoginPassword","id","TxtLoginPassword","value","","required","","autocomplete","off","placeholder","Password",1,"mobile-input",3,"ngModel","ngModelChange","keyup"],["type","submit","expand","full",1,"btn-submit",3,"click"],["tappable","",1,"forgot-pwd-link",3,"click"],["tappable","",1,"msg-lighter","grey-text","register-text",3,"click"],[3,"value",4,"ngIf"],[3,"value"],[1,"err-msg"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"p",4),e._uU(5," Welcome "),e.qZA(),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return i.onSubmit(i.FrmLogin.value)}),e.TgZ(7,"ion-list",6)(8,"ion-item",7)(9,"ion-select",8),e.NdJ("ngModelChange",function(g){return i.model.country_phone_code=g})("ionChange",function(){return i.getCountryVal()}),e.YNc(10,C,1,1,"ng-template",9),e.qZA(),e.TgZ(11,"ion-input",10),e.NdJ("ngModelChange",function(g){return i.model.mobile=g})("keyup",function(){return i.mobRegFlag=!1,i.submitted=!1}),e.qZA()(),e.YNc(12,M,5,2,"div",11),e.YNc(13,I,2,0,"div",11),e.TgZ(14,"ion-item",7)(15,"ion-input",12),e.NdJ("ngModelChange",function(g){return i.model.password=g})("keyup",function(){return i.submitted=!1}),e.qZA()(),e.YNc(16,O,2,0,"div",11),e.qZA(),e.TgZ(17,"ion-button",13),e.NdJ("click",function(){return i.submitted=!0}),e._uU(18,"Submit"),e.qZA()()(),e.TgZ(19,"p",14),e.NdJ("click",function(){return i.goToForgotPassword()}),e.TgZ(20,"strong"),e._uU(21,"Forgot Password?"),e.qZA()(),e.TgZ(22,"p",15),e.NdJ("click",function(){return i.goToRegisteration()}),e._uU(23," Have not register yet? "),e.TgZ(24,"strong"),e._uU(25,"Register here"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",i.FrmLogin),e.xp6(3),e.Q6J("ngModel",i.model.country_phone_code)("selectedText",i.model.country_phone_code),e.xp6(1),e.Q6J("ngForOf",i.countries),e.xp6(1),e.Q6J("ngModel",i.model.mobile),e.xp6(1),e.Q6J("ngIf",(i.FrmLogin.controls.TxtLogMobile.hasError("required")||i.FrmLogin.controls.TxtLogMobile.hasError("pattern"))&&i.submitted),e.xp6(1),e.Q6J("ngIf",i.mobRegFlag&&i.submitted),e.xp6(2),e.Q6J("ngModel",i.model.password),e.xp6(1),e.Q6J("ngIf",i.FrmLogin.controls.TxtLoginPassword.hasError("required")&&i.submitted))},dependencies:[p.sg,p.O5,n._Y,n.JJ,n.JL,n.Q7,l.YG,l.W2,l.pK,l.Ie,l.q_,l.t9,l.n0,l.as,l.QI,l.j9,n.sg,n.u],styles:[".h1-header[_ngcontent-%COMP%]{color:#fff}.reg-otp-header[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:10px}.logo-holder[_ngcontent-%COMP%]{display:inline-block;width:100%;margin-top:50px;text-align:center}.logo-img[_ngcontent-%COMP%]{display:inline-block;width:135px}.forgot-pwd-link[_ngcontent-%COMP%]{width:100%;display:inline-block;margin-top:10px;text-align:right;color:#065efe}.register-text[_ngcontent-%COMP%]{width:100%;display:inline-block;margin-top:10px;text-align:center;color:#fff}.register-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#065efe}.login-form-wrapper[_ngcontent-%COMP%]{margin-top:0}.item[_ngcontent-%COMP%]   ion-icon[item-left].mobile-icon[_ngcontent-%COMP%]{position:absolute;top:15px;left:9px;margin:0;font-size:2rem;color:#065efe}.mobile-select[_ngcontent-%COMP%]{font-size:1.4rem;color:#222;padding:8px;margin-top:1px;border-bottom:0!important}.mobile-select.select-md[_ngcontent-%COMP%]{padding:13px 8px 13px 25px}.login-form-list[_ngcontent-%COMP%]   .form-input-holder[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{margin-left:0}.mobile-input-holder[_ngcontent-%COMP%]{background:#ffffff!important;--background:#ffffff;color:#222;margin-bottom:10px}.mobile-input[_ngcontent-%COMP%]{border-bottom:0}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(w),f.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,n.u5,l.Pc,Z,n.UX]}),o})()}}]);